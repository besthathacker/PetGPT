<!DOCTYPE html>
<html lang="en">
<head>
Â Â <meta charset="UTF-8" />
Â Â <title>PetGPT - GPT-2 Web Chat</title>
Â Â <style>
Â Â Â Â html, body {
Â Â Â Â Â Â margin: 0; padding: 0;
Â Â Â Â Â Â background: #1e1e1e;
Â Â Â Â Â Â color: white;
Â Â Â Â Â Â font-family: Arial, sans-serif;
Â Â Â Â Â Â height: 100%;
Â Â Â Â Â Â display: flex;
Â Â Â Â Â Â flex-direction: column;
Â Â Â Â }
Â Â Â Â header {
Â Â Â Â Â Â background: #007acc;
Â Â Â Â Â Â padding: 16px;
Â Â Â Â Â Â text-align: center;
Â Â Â Â Â Â font-size: 22px;
Â Â Â Â }
Â Â Â Â #chat {
Â Â Â Â Â Â flex: 1;
Â Â Â Â Â Â overflow-y: auto;
Â Â Â Â Â Â padding: 12px;
Â Â Â Â Â Â background: #2b2b2b;
Â Â Â Â }
Â Â Â Â .message {
Â Â Â Â Â Â margin: 6px 0;
Â Â Â Â Â Â padding: 8px 12px;
Â Â Â Â Â Â border-radius: 6px;
Â Â Â Â Â Â max-width: 75%;
Â Â Â Â Â Â word-wrap: break-word;
Â Â Â Â }
Â Â Â Â .user { background: #3a3a3a; align-self: flex-end; }
Â Â Â Â .botÂ Â { background: #007acc; align-self: flex-start; }
Â Â Â Â #controls {
Â Â Â Â Â Â display: flex;
Â Â Â Â Â Â padding: 10px;
Â Â Â Â Â Â background: #111;
Â Â Â Â Â Â border-top: 1px solid #444;
Â Â Â Â }
Â Â Â Â #userInput {
Â Â Â Â Â Â flex: 1;
Â Â Â Â Â Â padding: 10px;
Â Â Â Â Â Â border: none;
Â Â Â Â Â Â border-radius: 4px;
Â Â Â Â Â Â background: #333;
Â Â Â Â Â Â color: #eee;
Â Â Â Â }
Â Â Â Â button {
Â Â Â Â Â Â margin-left: 8px;
Â Â Â Â Â Â padding: 10px 16px;
Â Â Â Â Â Â border: none;
Â Â Â Â Â Â border-radius: 4px;
Â Â Â Â Â Â background: #007acc;
Â Â Â Â Â Â color: white;
Â Â Â Â Â Â cursor: pointer;
Â Â Â Â }
Â Â Â Â #adminPanel {
Â Â Â Â Â Â display: none;
Â Â Â Â Â Â background: #222;
Â Â Â Â Â Â padding: 10px;
Â Â Â Â Â Â border-top: 2px solid #007acc;
Â Â Â Â }
Â Â Â Â #adminPanel h4, #adminPanel label { margin: 6px 0; }
Â Â </style>
</head>
<body>
Â Â <header>ğŸ¾ PetGPT (GPT-2 AI)</header>
Â Â <div id="chat"></div>
Â Â <div id="controls">
Â Â Â Â <input id="userInput" placeholder="Type your message..." autocomplete="off" />
Â Â Â Â <button id="sendBtn">Send</button>
Â Â Â Â <button id="resetBtn">Reset</button>
Â Â Â Â <button id="voiceBtn">ğŸ¤</button>
Â Â </div>
Â Â <div id="adminPanel">
Â Â Â Â <h4>Admin Panel (type â€œcheetoâ€)</h4>
Â Â Â Â <label>Background: <input type="color" id="bgPicker" /></label>
Â Â </div>

Â Â <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.5.0/dist/transformers.min.js"></script>
Â Â <script>
Â Â Â Â let tokenizer, model, gptReady = false;
Â Â Â Â const chat = document.getElementById('chat');
Â Â Â Â const userInput = document.getElementById('userInput');
Â Â Â Â const sendBtn = document.getElementById('sendBtn');
Â Â Â Â const resetBtn = document.getElementById('resetBtn');
Â Â Â Â const voiceBtn = document.getElementById('voiceBtn');
Â Â Â Â const adminPanel = document.getElementById('adminPanel');
Â Â Â Â const bgPicker = document.getElementById('bgPicker');
Â Â Â Â let memory = JSON.parse(localStorage.getItem('petgpt-memory') || '{}');

Â Â Â Â function append(msg, cls) {
Â Â Â Â Â Â const d = document.createElement('div');
Â Â Â Â Â Â d.className = 'message ' + cls;
Â Â Â Â Â Â d.textContent = msg;
Â Â Â Â Â Â chat.appendChild(d);
Â Â Â Â Â Â chat.scrollTop = chat.scrollHeight;
Â Â Â Â }

Â Â Â Â function saveMem() {
Â Â Â Â Â Â localStorage.setItem('petgpt-memory', JSON.stringify(memory));
Â Â Â Â }

Â Â Â Â async function getReply(text) {
Â Â Â Â Â Â const t = text.toLowerCase();

Â Â Â Â Â Â if (t.startsWith('remember:')) {
Â Â Â Â Â Â Â Â const [k, v] = t.slice(9).split('=').map(s => s.trim());
Â Â Â Â Â Â Â Â if (k && v) {
Â Â Â Â Â Â Â Â Â Â memory[k] = v;
Â Â Â Â Â Â Â Â Â Â saveMem();
Â Â Â Â Â Â Â Â Â Â return `Got it! I'll remember ${k} = ${v}`;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â return `Use: remember:key=value`;
Â Â Â Â Â Â }

Â Â Â Â Â Â for (let k in memory) {
Â Â Â Â Â Â Â Â if (t.includes(k.toLowerCase())) return `You told me ${k} = ${memory[k]}`;
Â Â Â Â Â Â }

Â Â Â Â Â Â if (t.includes('cheeto')) {
Â Â Â Â Â Â Â Â adminPanel.style.display = 'block';
Â Â Â Â Â Â Â Â return "Admin panel unlocked!";
Â Â Â Â Â Â }

Â Â Â Â Â Â if (gptReady && tokenizer && model) {
Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â const encoded = await tokenizer.encode(text);
Â Â Â Â Â Â Â Â Â Â const output = await model.generate(encoded.inputIds, {
Â Â Â Â Â Â Â Â Â Â Â Â max_new_tokens: 50,
Â Â Â Â Â Â Â Â Â Â Â Â temperature: 0.8,
Â Â Â Â Â Â Â Â Â Â Â Â top_p: 0.9
Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â const decoded = await tokenizer.decode(output[0]);
Â Â Â Â Â Â Â Â Â Â return decoded.replace(text, '').trim() || "(no reply)";
Â Â Â Â Â Â Â Â } catch (e) {
Â Â Â Â Â Â Â Â Â Â console.error("GPT-2 error:", e);
Â Â Â Â Â Â Â Â Â Â return "Something went wrong with GPT-2.";
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }

Â Â Â Â Â Â return "I don't understand that yet.";
Â Â Â Â }

Â Â Â Â async function sendMessage() {
Â Â Â Â Â Â const txt = userInput.value.trim();
Â Â Â Â Â Â if (!txt) return;
Â Â Â Â Â Â append("You: " + txt, 'user');
Â Â Â Â Â Â userInput.value = '';
Â Â Â Â Â Â userInput.disabled = true;
Â Â Â Â Â Â sendBtn.disabled = true;

Â Â Â Â Â Â const reply = await getReply(txt);
Â Â Â Â Â Â append("PetGPT: " + reply, 'bot');

Â Â Â Â Â Â userInput.disabled = false;
Â Â Â Â Â Â sendBtn.disabled = false;
Â Â Â Â Â Â userInput.focus();
Â Â Â Â }

Â Â Â Â sendBtn.onclick = sendMessage;
Â Â Â Â userInput.onkeydown = e => {
Â Â Â Â Â Â if (e.key === 'Enter') sendMessage();
Â Â Â Â };

Â Â Â Â resetBtn.onclick = () => {
Â Â Â Â Â Â if (confirm("Clear chat and memory?")) {
Â Â Â Â Â Â Â Â chat.innerHTML = '';
Â Â Â Â Â Â Â Â memory = {};
Â Â Â Â Â Â Â Â localStorage.clear();
Â Â Â Â Â Â }
Â Â Â Â };

Â Â Â Â bgPicker.oninput = e => document.body.style.background = e.target.value;

Â Â Â Â // Voice recognition
Â Â Â Â let recognition, recognizing = false;
Â Â Â Â if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
Â Â Â Â Â Â const SR = window.webkitSpeechRecognition || window.SpeechRecognition;
Â Â Â Â Â Â recognition = new SR();
Â Â Â Â Â Â recognition.lang = 'en-US';
Â Â Â Â Â Â recognition.interimResults = false;
Â Â Â Â Â Â recognition.continuous = false;

Â Â Â Â Â Â recognition.onstart = () => { recognizing = true; voiceBtn.textContent = 'ğŸ›‘'; };
Â Â Â Â Â Â recognition.onend = () => { recognizing = false; voiceBtn.textContent = 'ğŸ¤'; };
Â Â Â Â Â Â recognition.onresult = e => {
Â Â Â Â Â Â Â Â const t = e.results[0][0].transcript;
Â Â Â Â Â Â Â Â userInput.value = t;
Â Â Â Â Â Â Â Â sendMessage();
Â Â Â Â Â Â };
Â Â Â Â }

Â Â Â Â voiceBtn.onclick = () => {
Â Â Â Â Â Â if (!recognition) return alert('Voice recognition not supported.');
Â Â Â Â Â Â recognizing ? recognition.stop() : recognition.start();
Â Â Â Â };

Â Â Â Â // Load GPT-2
Â Â Â Â append("Loading GPT-2 AI...", "bot");
Â Â Â Â window.transformers
Â Â Â Â Â Â .AutoTokenizer.fromPretrained("gpt2")
Â Â Â Â Â Â .then(tk => {
Â Â Â Â Â Â Â Â tokenizer = tk;
Â Â Â Â Â Â Â Â return window.transformers.AutoModelForCausalLM.fromPretrained("gpt2");
Â Â Â Â Â Â })
Â Â Â Â Â Â .then(m => {
Â Â Â Â Â Â Â Â model = m;
Â Â Â Â Â Â Â Â gptReady = true;
Â Â Â Â Â Â Â Â append("GPT-2 model ready! ğŸ‰", "bot");
Â Â Â Â Â Â })
Â Â Â Â Â Â .catch(err => {
Â Â Â Â Â Â Â Â append("Failed to load GPT-2. Fallback only.", "bot");
Â Â Â Â Â Â Â Â console.error(err);
Â Â Â Â Â Â });
Â Â </script>
</body>
</html>
