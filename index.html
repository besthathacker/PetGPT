<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PetGPT Ultimate</title>
<style>
Â Â /* Reset & basic styles */
Â Â * {
Â Â Â Â box-sizing: border-box;
Â Â }
Â Â body {
Â Â Â Â font-family: Arial, sans-serif;
Â Â Â Â margin: 0; padding: 0;
Â Â Â Â background: #1e1e1e;
Â Â Â Â color: #eee;
Â Â Â Â display: flex;
Â Â Â Â flex-direction: column;
Â Â Â Â height: 100vh;
Â Â }
Â Â header, footer {
Â Â Â Â background: #007acc;
Â Â Â Â color: white;
Â Â Â Â text-align: center;
Â Â Â Â padding: 1rem;
Â Â Â Â user-select: none;
Â Â }
Â Â main {
Â Â Â Â flex: 1;
Â Â Â Â display: flex;
Â Â Â Â flex-direction: column;
Â Â Â Â max-width: 700px;
Â Â Â Â margin: 0 auto;
Â Â Â Â width: 100%;
Â Â Â Â padding: 0 1rem 1rem;
Â Â Â Â overflow: hidden;
Â Â }
Â Â #chat {
Â Â Â Â flex: 1;
Â Â Â Â background: #2b2b2b;
Â Â Â Â border-radius: 8px;
Â Â Â Â padding: 10px;
Â Â Â Â overflow-y: auto;
Â Â Â Â margin-bottom: 10px;
Â Â Â Â font-size: 1rem;
Â Â }
Â Â .message {
Â Â Â Â max-width: 75%;
Â Â Â Â margin: 6px 0;
Â Â Â Â padding: 8px;
Â Â Â Â border-radius: 6px;
Â Â Â Â word-wrap: break-word;
Â Â }
Â Â .user {
Â Â Â Â background: #3a3a3a;
Â Â Â Â align-self: flex-end;
Â Â }
Â Â .bot {
Â Â Â Â background: #007acc;
Â Â Â Â align-self: flex-start;
Â Â }
Â Â #controls {
Â Â Â Â display: flex;
Â Â Â Â gap: 8px;
Â Â }
Â Â #userInput {
Â Â Â Â flex: 1;
Â Â Â Â padding: 10px;
Â Â Â Â border-radius: 6px;
Â Â Â Â border: none;
Â Â Â Â background: #333;
Â Â Â Â color: #eee;
Â Â Â Â font-size: 1rem;
Â Â }
Â Â #userInput:focus {
Â Â Â Â outline: 2px solid #007acc;
Â Â }
Â Â button {
Â Â Â Â padding: 10px 14px;
Â Â Â Â background: #007acc;
Â Â Â Â border: none;
Â Â Â Â border-radius: 6px;
Â Â Â Â color: white;
Â Â Â Â cursor: pointer;
Â Â Â Â user-select: none;
Â Â Â Â font-size: 1rem;
Â Â Â Â transition: background 0.2s ease;
Â Â }
Â Â button:disabled {
Â Â Â Â background: #444;
Â Â Â Â cursor: not-allowed;
Â Â }
Â Â button:hover:not(:disabled) {
Â Â Â Â background: #005f99;
Â Â }
Â Â #adminPanel {
Â Â Â Â display: none;
Â Â Â Â background: #333;
Â Â Â Â padding: 10px;
Â Â Â Â margin-top: 1rem;
Â Â Â Â border-radius: 8px;
Â Â Â Â color: #eee;
Â Â }
Â Â #adminPanel h4 {
Â Â Â Â margin-top: 0;
Â Â }
Â Â #bgPicker {
Â Â Â Â margin-left: 0.5rem;
Â Â Â Â vertical-align: middle;
Â Â }
Â Â /* File Upload Section */
Â Â #fileSection {
Â Â Â Â margin-top: 1rem;
Â Â Â Â background: #222;
Â Â Â Â padding: 10px;
Â Â Â Â border-radius: 8px;
Â Â Â Â color: #ccc;
Â Â Â Â font-size: 0.9rem;
Â Â }
Â Â #fileHexPreview {
Â Â Â Â margin-top: 0.5rem;
Â Â Â Â background: #111;
Â Â Â Â color: #0f0;
Â Â Â Â font-family: monospace;
Â Â Â Â font-size: 0.75rem;
Â Â Â Â height: 150px;
Â Â Â Â overflow-y: auto;
Â Â Â Â padding: 10px;
Â Â Â Â border-radius: 6px;
Â Â Â Â white-space: pre-wrap;
Â Â }
Â Â /* Dark mode toggle */
Â Â #darkModeToggle {
Â Â Â Â margin-left: auto;
Â Â Â Â background: #444;
Â Â Â Â font-size: 0.9rem;
Â Â }
Â Â /* Responsive */
Â Â @media (max-width: 600px) {
Â Â Â Â #chat {
Â Â Â Â Â Â font-size: 0.9rem;
Â Â Â Â }
Â Â Â Â button, #userInput {
Â Â Â Â Â Â font-size: 0.9rem;
Â Â Â Â }
Â Â }
</style>
</head>
<body>
<header>PetGPT Ultimate</header>
<main>
Â Â <div id="chat" role="log" aria-live="polite" aria-atomic="false"></div>
Â Â <div id="controls">
Â Â Â Â <input id="userInput" placeholder="Type your message..." autocomplete="off" aria-label="Type your message" />
Â Â Â Â <button id="sendBtn" aria-label="Send message">Send</button>
Â Â Â Â <button id="resetBtn" aria-label="Reset memory">Reset Memory</button>
Â Â Â Â <button id="voiceBtn" aria-label="Toggle voice chat">ğŸ¤ Voice Chat</button>
Â Â Â Â <button id="adminToggleBtn" aria-label="Toggle admin panel">âš™ï¸</button>
Â Â Â Â <button id="darkModeToggle" aria-label="Toggle dark/light mode">Light Mode</button>
Â Â </div>

Â Â <div id="adminPanel" aria-hidden="true">
Â Â Â Â <h4>Admin Panel (type "cheeto" to toggle)</h4>
Â Â Â Â <label>Background Color: <input type="color" id="bgPicker" aria-label="Pick background color" /></label>
Â Â </div>

Â Â <section id="fileSection" aria-label="File upload and preview">
Â Â Â Â <label for="fileInput">Upload any file:</label>
Â Â Â Â <input type="file" id="fileInput" aria-describedby="fileHelp" />
Â Â Â Â <div id="fileHelp">Shows hex preview for binary files.</div>
Â Â Â Â <pre id="fileHexPreview" aria-live="polite" aria-atomic="true"></pre>
Â Â </section>
</main>
<footer>Â© 2025 PetGPT Ultimate</footer>

<script src="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.5.0/dist/transformers.min.js"></script>
<script>
(async () => {
Â Â // UI refs
Â Â const chat = document.getElementById('chat');
Â Â const userInput = document.getElementById('userInput');
Â Â const sendBtn = document.getElementById('sendBtn');
Â Â const resetBtn = document.getElementById('resetBtn');
Â Â const voiceBtn = document.getElementById('voiceBtn');
Â Â const adminPanel = document.getElementById('adminPanel');
Â Â const adminToggleBtn = document.getElementById('adminToggleBtn');
Â Â const bgPicker = document.getElementById('bgPicker');
Â Â const darkModeToggle = document.getElementById('darkModeToggle');
Â Â const fileInput = document.getElementById('fileInput');
Â Â const fileHexPreview = document.getElementById('fileHexPreview');

Â Â // State
Â Â let gptReady = false;
Â Â let tokenizer, model;
Â Â let memory = JSON.parse(localStorage.getItem('petgpt-memory') || '{}');
Â Â let recognizing = false;
Â Â let recognition;

Â Â // Dark mode default state
Â Â let darkMode = true;
Â Â function updateDarkModeUI() {
Â Â Â Â if (darkMode) {
Â Â Â Â Â Â document.body.style.background = '#1e1e1e';
Â Â Â Â Â Â darkModeToggle.textContent = 'Light Mode';
Â Â Â Â Â Â document.body.style.color = '#eee';
Â Â Â Â } else {
Â Â Â Â Â Â document.body.style.background = '#eee';
Â Â Â Â Â Â darkModeToggle.textContent = 'Dark Mode';
Â Â Â Â Â Â document.body.style.color = '#111';
Â Â Â Â }
Â Â }
Â Â updateDarkModeUI();

Â Â // Append chat message
Â Â function append(msg, cls) {
Â Â Â Â const d = document.createElement('div');
Â Â Â Â d.className = 'message ' + cls;
Â Â Â Â d.textContent = msg;
Â Â Â Â chat.appendChild(d);
Â Â Â Â chat.scrollTop = chat.scrollHeight;
Â Â }

Â Â // Save memory to localStorage
Â Â function saveMem() {
Â Â Â Â localStorage.setItem('petgpt-memory', JSON.stringify(memory));
Â Â }

Â Â // Simple fallback dictionary
Â Â const fallbackModel = {
Â Â Â Â hello: "Hi there! How can I help you today?",
Â Â Â Â bye: "Goodbye! Have a great day!",
Â Â Â Â 'how are you': "I'm just a bunch of code, but thanks for asking!",
Â Â };

Â Â // Chat reply logic
Â Â async function getReply(text) {
Â Â Â Â const t = text.toLowerCase();

Â Â Â Â if (t.startsWith('remember:')) {
Â Â Â Â Â Â const [k, v] = t.slice(9).split('=').map(s => s.trim());
Â Â Â Â Â Â if (k && v) {
Â Â Â Â Â Â Â Â memory[k] = v;
Â Â Â Â Â Â Â Â saveMem();
Â Â Â Â Â Â Â Â return `Got it! I'll remember ${k} = ${v}`;
Â Â Â Â Â Â }
Â Â Â Â Â Â return 'Use: remember:key=value';
Â Â Â Â }

Â Â Â Â for (const k in memory) {
Â Â Â Â Â Â if (t.includes(k.toLowerCase())) {
Â Â Â Â Â Â Â Â return `You told me ${k} = ${memory[k]}`;
Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â if (t.includes('cheeto')) {
Â Â Â Â Â Â toggleAdmin(true);
Â Â Â Â Â Â return 'Admin unlocked!';
Â Â Â Â }

Â Â Â Â // Use GPT-2 if ready
Â Â Â Â if (gptReady && model && tokenizer) {
Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â const encoded = await tokenizer.encode(text);
Â Â Â Â Â Â Â Â const output = await model.generate(encoded.inputIds, {
Â Â Â Â Â Â Â Â Â Â max_new_tokens: 50,
Â Â Â Â Â Â Â Â Â Â do_sample: true,
Â Â Â Â Â Â Â Â Â Â temperature: 0.7,
Â Â Â Â Â Â Â Â Â Â top_p: 0.9,
Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â const decoded = await tokenizer.decode(output[0]);
Â Â Â Â Â Â Â Â let reply = decoded.replace(text, '').trim();
Â Â Â Â Â Â Â Â if (!reply) reply = "Hmm, I don't know what to say.";
Â Â Â Â Â Â Â Â return reply;
Â Â Â Â Â Â } catch (e) {
Â Â Â Â Â Â Â Â console.error('GPT-2 generation error:', e);
Â Â Â Â Â Â Â Â return "Sorry, I had trouble thinking...";
Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â // Fallback dictionary matching
Â Â Â Â for (const key in fallbackModel) {
Â Â Â Â Â Â if (t.includes(key)) return fallbackModel[key];
Â Â Â Â }
Â Â Â Â return "Sorry, I don't understand.";
Â Â }

Â Â // Send message handler
Â Â async function sendMessage() {
Â Â Â Â const txt = userInput.value.trim();
Â Â Â Â if (!txt) return;
Â Â Â Â append('You: ' + txt, 'user');
Â Â Â Â userInput.value = '';
Â Â Â Â userInput.disabled = true;
Â Â Â Â sendBtn.disabled = true;
Â Â Â Â try {
Â Â Â Â Â Â const reply = await getReply(txt);
Â Â Â Â Â Â append('PetGPT: ' + reply, 'bot');
Â Â Â Â } catch (e) {
Â Â Â Â Â Â append('PetGPT: Sorry, an error occurred.', 'bot');
Â Â Â Â Â Â console.error(e);
Â Â Â Â } finally {
Â Â Â Â Â Â userInput.disabled = false;
Â Â Â Â Â Â sendBtn.disabled = false;
Â Â Â Â Â Â userInput.focus();
Â Â Â Â }
Â Â }
Â Â sendBtn.onclick = sendMessage;
Â Â userInput.addEventListener('keydown', e => {
Â Â Â Â if (e.key === 'Enter') {
Â Â Â Â Â Â e.preventDefault();
Â Â Â Â Â Â sendMessage();
Â Â Â Â }
Â Â });

Â Â // Reset memory and chat
Â Â resetBtn.onclick = () => {
Â Â Â Â if (confirm('Clear memory and chat?')) {
Â Â Â Â Â Â localStorage.clear();
Â Â Â Â Â Â memory = {};
Â Â Â Â Â Â chat.innerHTML = '';
Â Â Â Â Â Â append('Memory cleared.', 'bot');
Â Â Â Â }
Â Â };

Â Â // Admin panel toggle (button & automatic)
Â Â function toggleAdmin(show) {
Â Â Â Â if (typeof show === 'boolean') {
Â Â Â Â Â Â adminPanel.style.display = show ? 'block' : 'none';
Â Â Â Â Â Â adminPanel.setAttribute('aria-hidden', !show);
Â Â Â Â } else {
Â Â Â Â Â Â const isVisible = adminPanel.style.display === 'block';
Â Â Â Â Â Â adminPanel.style.display = isVisible ? 'none' : 'block';
Â Â Â Â Â Â adminPanel.setAttribute('aria-hidden', isVisible);
Â Â Â Â }
Â Â }
Â Â adminToggleBtn.onclick = () => toggleAdmin();

Â Â // Background color picker
Â Â bgPicker.oninput = e => document.body.style.background = e.target.value;

Â Â // Dark mode toggle button
Â Â darkModeToggle.onclick = () => {
Â Â Â Â darkMode = !darkMode;
Â Â Â Â updateDarkModeUI();
Â Â };

Â Â // Voice recognition
Â Â if (window.SpeechRecognition || window.webkitSpeechRecognition) {
Â Â Â Â const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
Â Â Â Â recognition = new SR();
Â Â Â Â recognition.lang = 'en-US';
Â Â Â Â recognition.interimResults = false;
Â Â Â Â recognition.continuous = false;
Â Â Â Â recognition.onstart = () => {
Â Â Â Â Â Â recognizing = true;
Â Â Â Â Â Â voiceBtn.textContent = 'ğŸ›‘ Stop';
Â Â Â Â };
Â Â Â Â recognition.onend = () => {
Â Â Â Â Â Â recognizing = false;
Â Â Â Â Â Â voiceBtn.textContent = 'ğŸ¤ Voice Chat';
Â Â Â Â };
Â Â Â Â recognition.onerror = () => {
Â Â Â Â Â Â recognizing = false;
Â Â Â Â Â Â voiceBtn.textContent = 'ğŸ¤ Voice Chat';
Â Â Â Â };
Â Â Â Â recognition.onresult = e => {
Â Â Â Â Â Â const t = e.results[0][0].transcript;
Â Â Â Â Â Â userInput.value = t;
Â Â Â Â Â Â sendMessage();
Â Â Â Â };
Â Â Â Â voiceBtn.onclick = () => {
Â Â Â Â Â Â if (!recognition) return alert('SpeechRecognition not supported');
Â Â Â Â Â Â recognizing ? recognition.stop() : recognition.start();
Â Â Â Â };
Â Â } else {
Â Â Â Â voiceBtn.disabled = true;
Â Â Â Â voiceBtn.title = 'SpeechRecognition not supported';
Â Â }

Â Â // File upload & hex preview
Â Â fileInput.addEventListener('change', e => {
Â Â Â Â const file = e.target.files[0];
Â Â Â Â if (!file) {
Â Â Â Â Â Â fileHexPreview.textContent = '';
Â Â Â Â Â Â return;
Â Â Â Â }

Â Â Â Â const reader = new FileReader();
Â Â Â Â reader.onload = () => {
Â Â Â Â Â Â const arrayBuffer = reader.result;
Â Â Â Â Â Â // Check if file is binary (simple heuristic: non-text characters)
Â Â Â Â Â Â const bytes = new Uint8Array(arrayBuffer);
Â Â Â Â Â Â let isBinary = false;
Â Â Â Â Â Â for (let i = 0; i < Math.min(bytes.length, 1000); i++) {
Â Â Â Â Â Â Â Â if (bytes[i] === 0) {
Â Â Â Â Â Â Â Â Â Â isBinary = true;
Â Â Â Â Â Â Â Â Â Â break;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â Â Â if (isBinary) {
Â Â Â Â Â Â Â Â // Show hex preview (first 512 bytes)
Â Â Â Â Â Â Â Â const hex = [];
Â Â Â Â Â Â Â Â for (let i = 0; i < Math.min(bytes.length, 512); i++) {
Â Â Â Â Â Â Â Â Â Â const h = bytes[i].toString(16).padStart(2, '0');
Â Â Â Â Â Â Â Â Â Â hex.push(h);
Â Â Â Â Â Â Â Â Â Â if ((i + 1) % 16 === 0) hex.push('\n');
Â Â Â Â Â Â Â Â Â Â else hex.push(' ');
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â fileHexPreview.textContent = hex.join('').toUpperCase();
Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â // Show text preview (truncate if long)
Â Â Â Â Â Â Â Â const text = new TextDecoder().decode(bytes);
Â Â Â Â Â Â Â Â fileHexPreview.textContent = text.length > 1000 ? text.slice(0, 1000) + '...' : text;
Â Â Â Â Â Â }
Â Â Â Â };
Â Â Â Â reader.readAsArrayBuffer(file);
Â Â });

Â Â // Load GPT-2 tokenizer and model
Â Â append('Loading GPT-2 AI model... Please wait.', 'bot');
Â Â try {
Â Â Â Â tokenizer = await window.transformers.AutoTokenizer.fromPretrained('gpt2');
Â Â Â Â model = await window.transformers.AutoModelForCausalLM.fromPretrained('gpt2');
Â Â Â Â gptReady = true;
Â Â Â Â append('GPT-2 AI model loaded! Test worked!', 'bot');
Â Â } catch (e) {
Â Â Â Â append('Failed to load GPT-2 model. Falling back to dictionary.', 'bot');
Â Â Â Â console.error('GPT-2 load error:', e);
Â Â }

Â Â userInput.focus();
})();
</script>
</body>
</html>
